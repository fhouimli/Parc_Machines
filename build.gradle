version = '1.0'

dependances(type:Exec) {​​​​​​​
    println 'hello'
  executable 'sh'
  args '-c', 'pip3 install flask'
   standardOutput = new ByteArrayOutputStream()
   ext.output = {​​​​​​​ return standardOutput.toString() }​​​​​​​
}​​​​​​​


def tarfile = "APP_Parc_Machines_V-" + version


packageDistribution(type: Zip, dependsOn: dependances) {​​​​​​​
    from ('parcMachines.py') {​​​​​​​ into '.' }​​​​​​​
    archiveFileName = tarfile + ".zip"
    destinationDirectory = file("build")
}​​​​​​​


up(type:Exec, dependsOn: packageDistribution) {​​​​​​​
 executable 'sh'
 args '-c', 'curl -v --user "admin:admin" --upload-file build/archiveFileName http://192.168.0.51:8081/repository/Depot/archiveFileName'
 standardOutput = new ByteArrayOutputStream()
 ext.output = {​​​​​​​ return standardOutput.toString() }​​​​​​​
}​​​​​​​



